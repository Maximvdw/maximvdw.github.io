---
layout: default.njk
---
<div class="container main" itemscope itemtype="http://schema.org/Event">
    <div class="row">
        <div class="col-sm-3 mobile-hide">
            <nav class="navigation">
            {% for year, posts in collections.presentations_year %}
                <h3>{{ year }}</h3>
                <ul>
                {% for post in posts | reverse %}
                    <li {% if page.url == post.url %}class="selected"{% endif %}>
                    <a href="{{ post.url }}" {% if page.url == post.url %}class="current"{% endif %} itemprop="url">{{ post.data.title }}</a>
                    </li>
                {% endfor %}
                </ul>
            {% endfor %}
            </nav>
        </div>
        <div class="col-sm-9 typography" itemscope itemtype="http://schema.org/Presentation">
            <h1 itemprop="name">{{ title }}</h1>

            {% if publication %}
            <a href="{{ publication }}" class="btn btn-red btn-icon" data-title="Publication" itemprop="publication"><i class="fa fa-regular fa-file-pdf"></i> Publication</a>
            {% endif %}
            {% if video %}
            <a href="{{ video }}" class="btn btn-blue btn-icon" data-title="Video" itemprop="video"><i class="fa fa-regular fa-file-video"></i> Recording</a>
            {% endif %}
            {% if event %}
            <a href="{{ event }}" class="btn btn-yellow btn-icon" itemprop="event"><i class="fa fa-calendar"></i> Event link</a>
            {% endif %}
            
            <h2>Details</h2>
            <div class="post-details">
                <p><strong>Speaker:</strong> <span itemprop="performer">{{ speaker }}</span></p>
                <p><strong>Date:</strong> <time itemprop="startDate" datetime="{{ date }}">{{ date }}</time></p>
                {% if scheduled %}
                <p><strong>Status:</strong> <span itemprop="eventStatus">Scheduled</span></p>
                {% endif %}
                <p><strong>Venue:</strong> <span itemprop="location" itemscope itemtype="http://schema.org/Place"><span itemprop="name">{{ venue.name }}</span>, <span itemprop="address">{{ venue.location }}</span></span></p>
            </div>

            {% if publication and not content %}
            {% set publicationContent = collections.all | urlmatch(publication) | first %}
            {% if publicationContent %}
            <h2>Abstract</h2>
            <div class="publication-content" itemprop="description">
                {{ publicationContent.templateContent | safe }}
            </div>
            {% endif %}
            {% else %}
            <div itemprop="description">
                {{ content | safe }}
            </div>
            {% endif %}

            {% if video %}
            {% if video.startsWith('https://videolectures.net') %}
            <iframe src="{{ video }}" class="video" allowfullscreen style="aspect-ratio:16/9" itemprop="video"></iframe>
            {% elif video.endsWith('mp4') %}
            <video class="video" controls preload="auto" itemprop="video">
                <source src="{{ video }}" type="video/mp4">
                Your browser does not support the video tag.
            </video>
            {% elif video.endsWith('webm') %}
            <video class="video" controls preload="auto" itemprop="video">
                <source src="{{ video }}" type="video/webm">
                Your browser does not support the video tag.
            </video>
            {% endif %}
            {% endif %}

            <div class="gallery" itemprop="image">
                {% for image in images %}
                    <div class="gallery-item">
                        <img src="{{ image }}" alt="Gallery image" onclick="enlargeImage(this)">
                    </div>
                {% endfor %}
            </div>
            <script>
                function enlargeImage(img) {
                    const galleryItem = img.parentElement;
                    galleryItem.classList.toggle('enlarged');
                }
            </script>
        </div>
    </div>
</div>